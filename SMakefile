#
# This file is specific to Carnegie Mellon University's
# software build process
#

MAKE=gmake

AMSSYNC=--enable-amssync

WITHAUTH="--with-auth=krb_pts"
if test `sys` = pmax_ul4; then
	WITHAUTH=""
	AMSSYNC=""
fi
if test `sys` = sgi_62 -o `sys` = i386_linux2 ; then
	AMSSYNC=""
fi

LNCOMMAND="${SRCDIR}/configure $WITHAUTH --with-inn=/usr/news $AMSSYNC --enable-experiment --enable-cmulocal --enable-debug --with-cyrus-user=cyrus --with-cyrus-group=staff"

# Ryan's aggressive optimizations
CC=cc
case `uname` in
  Linux) CFLAGS="-O3"
	;;
  IRIX) CFLAGS="-O2"
        # LDFLAGS="-L/usr/local/lib -Wl,-rpath,/usr/local/lib"
        export LDFLAGS
	;;
  HP-UX)   CFLAGS="-Ae +O3 +Oaggressive"
	CC=gcc #cheat for now
	CFLAGS="-O2"
	;;
  SunOS)   
         if test "`uname -r`" = "4.1.3_U1"; then 
           CC=gcc
           CFLAGS=-O3
         else
           CFLAGS="-xO4 -xdepend"
         fi
         ;;
  ULTRIX)  CFLAGS="-O"
	;;
  *)       CFLAGS=-g
	;;
esac

export CFLAGS CC CXXFLAGS
