<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<title>Cyrus and CalDAV</title>
</head>
<body>

<h1>Cyrus and CalDAV</h1>

<b><i>Note that the CalDAV support in Cyrus is still experimental and
    under development.</i></b>

<h2>Introduction</h2>

<p>Cyrus has the ability to act as a calendar (CalDAV) server by using
  IMAP mailboxes as calendar collections and RFC 5322 messages to store
  iCalendar data.  This is made possible by a new HTTP daemon which
  is included with Cyrus.</p>

<p>The Cyrus CalDAV implementation is not yet complete and currently
  does NOT support scheduling, WebDAV ACLs, or all required CalDAV
  reports.  Work on these features is ongoing.  The server has been
  tested with the Mozilla Sunbird/Lightning, Apple iCal, and Evolution
  clients.</p>

<p>This document assumes that you have successfully been able to setup
  your Cyrus IMAP server.  If you have not already done so, please refer
  to the rest of the documentation.  This document also assumes that you
  are familiar with calendaring.</p>

<h2>Installation</h2>

<p>You will need to build Cyrus IMAPd with
  the <tt>--enable-caldav</tt> configure option.  This builds httpd
  and the associated utilities.</p>

<h3>Requirements</h3>

<ul>
<li>Must have <a href="http://xmlsoft.org/">libxml2</a>
  installed.</li>
<li>Must
  have <a href="http://freeassociation.sourceforge.net/">libical</a>
  installed.</li>
<li>Must have a recent SASL build from CVS (soon to be released as
  2.1.25) in order to support Digest and NTLM authentication.</li>
</ul>

<i>Note that none of the autoconf magic for detecting libxml2 and
  libical has been added yet.  You will probably have to
  edit <tt>imap/Makefile.in</tt> by hand.</i>

<h2>Configuration</h2>

<p>Currently calendar collections must reside under a user's Inbox as
  children of the <tt>#calendars</tt> mailbox.  This means that calendar
  data can be viewed with an IMAP client, but doing this
  is <b>strongly</b> discouraged as changes made via IMAP will leave the
  mailbox in a state unsuitable for CalDAV.  Future
  development will most likely change this so that calendars reside in
  their own partition and/or hierarchy.</p>

<p>Some CalDAV clients don't support the creation of calendars, so it is
  best to provision at least one calendar for each user.  To provision a
  user to have an "events" calendar, you would create a mailbox such
  as <tt>user.&lt;userid&gt;.#calendars.events</tt></p>

<p><i>Note: The <tt>#calendars</tt> mailbox need not exist as an
    actual mailbox, its is simply a placeholder in the same way
    that <tt>user</tt> is a placeholder.  Also note that CalDAV does
    NOT allow the nesting of calendars.</i></p>

<h2>Client Setup</h2>

<h3>Mozilla Sunbird/Lightning</h3>

<p>This client requires that a calendar already exist.  Assuming that you
  provisioned the "events" calendar as described above, set the calendar
  location to:</p>

<p><tt>http[s]://&lt;servername&gt;/calendars/user/&lt;userid&gt;/events/</tt></p>

<h3>Apple iCal</h3>

<p>This client is able to locate and create calendars on its own.  Set
  the server path to:</p>

<p><tt>http[s]://&lt;servername&gt;/principals/user/&lt;userid&gt;/</tt></p>

<h3>Evolution</h3>

<i>Add setup info</i>

</body></html>
