<HTML><HEAD>
<TITLE>Changes to the Cyrus IMAP Server</TITLE>
<!-- Changed by: Larry Greenfield 15-Aug-1999 -->
<!-- Changed by: Larry Greenfield 01-Jul-1999 -->
<!-- Changed by: Tim Showalter 16-Jun-1997 -->
</HEAD><BODY>
<h1>                     Known bugs in the Cyrus IMAP Server</h1>

<h3>imapd and core utilities</h3>

<ul>
<li> Multiple APPENDs don't always correctly return the EXISTS
response. (can't reproduce?)

<li> Particularly large quotas can wrap around.

<li> The RENAME command is not atomic.

<li> append.c: doesn't set the \Seen flag if the client requests it.

<li> MULTIAPPEND: does it do the right thing with an aborted APPEND
(literal length {0})?

<li> seen_db: doesn't use network byte order. also, need to close the
database before exiting and before the environment is closed down.

<li> does <tt>reconstruct</tt> correctly deal with the new header and
index summary information?

<li> <tt>deliver</tt> (wrapper) should fill in a more useful
Return-Path when none is given. (not important)
</ul>

<h3>proxyd and Cyrus Murder</h3>
<ul>
<li> <tt>proxyd</tt> doesn't support STARTTLS/imaps.

<li> COPY across servers isn't tested and isn't robust.

<li> RENAME across servers isn't implemented (less severe).

<li> Tagged lines with literals can cause problems.
</ul>

<h3>lmtpd, deliver, and sieve</h3>

<ul>
<li> 8-bit set characters are coerced to 'X', but not before the notify_zephyr 
code (if used) has had a chance to send them out.

<li> Deliver does not handle messages containing NUL properly due to
stdio problems (the characters between the NUL and the LF will be
lost.)

<li> Deliver doesn't gracefully handle CR CR sequences in messages.
Well, ok, it hangs.

<li> <tt>duplicate.c</tt> could be much more efficient than repeatedly
opening and closing databases.  (Cache last N databases used?)

<li> Should <tt>duplicate.c</tt> use transactions?  A single file?
</ul>

<h3>authentication and authorization</h3>

<ul>
<li>Using AFS groups with ptclient, users with negative rights as part of
groups may be granted access to mailboxes if ptclient has died.  We plan
to have this fixed eventually.

<li> In some failures of the krbck program, the error messages printed out
bear no resemblance to what actually went wrong.
</ul>

<h3>other utilities</h3>

<ul>
<li> <tt>cyradm</tt> doesn't handle BYE quite properly (especially a
BYE right after connect).

<li> <tt>imtest</tt> doesn't properly default to using the LOGIN
command.  also, it would be nice for the authorization name to default
to the authentication name, except when specifically overridden.

<li> <tt>collectnews</tt>'s routines in <tt>append.c</tt> are broken.
either remove <tt>collectnews</tt> or fix it.

</ul>

<h1>                     Things we want to do</h1>

<ul>
<li> Implement the IMAP ID extension.

<li> Implement the IMAP VIEW extension.

<li> Implement the IMAP SORT and THREAD extensions.

<li> Implement the IMAP ANNOTATE extension.

<li> Implement some sort of backup/restore system that's more
efficient and easier to use than Amanda on the filesystem.

<li> Add mailbox version numbers.

<li> Add mailbox tombstones (gives NEWNAME support).

<li> Design and implement ALIST, the advanced list command.
</ul>

<p>
Please report bugs to <a
href="mailto:cyrus-bugs@andrew.cmu.edu">cyrus-bugs@andrew.cmu.edu</a>.
Be sure to include (at least) the version of Cyrus you're using,
system type, compiler used, and the options passed to configure, along
with a detailed report.  Additional information is welcome, and
naturally, patches are deeply appreciated.

<p>
If you submit a patch, please send unified diffs (-u) if your diff program
supports them, or context diffs (-c) if it doesn't.  Plain diffs are very
difficult to evaluate.

<P><HR><P>
<A HREF="index.html">Return</A> to the Cyrus IMAP Server Home Page
</BODY></HTML>
